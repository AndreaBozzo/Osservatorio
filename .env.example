# Osservatorio ISTAT Data Platform - Environment Configuration Template
# Copy this file to .env and configure your settings

# =============================================================================
# Application Settings
# =============================================================================
OSSERVATORIO_ENV=development
LOG_LEVEL=INFO

# =============================================================================
# Database Configuration
# =============================================================================
# SQLite (primary metadata storage)
DATABASE_URL=sqlite:///data/databases/osservatorio_metadata.db

# DuckDB (analytics and time series data)
DUCKDB_URL=data/databases/osservatorio.duckdb

# =============================================================================
# API Configuration
# =============================================================================
API_BASE_URL=http://localhost:8000
API_TIMEOUT=30

# CORS Settings for React Frontend Integration
# Add your frontend URLs here (comma-separated, no spaces)
# Default includes: Next.js (3000), Vite (5173), and localhost variants
CORS_ALLOW_ORIGINS=http://localhost:3000,https://localhost:3000,http://localhost:5173,https://localhost:5173

# =============================================================================
# Authentication & Security
# =============================================================================
# JWT Configuration
# IMPORTANT: Generate a secure random secret key for production!
# Run: python -c "import secrets; print(secrets.token_urlsafe(64))"
JWT_SECRET_KEY=your-super-secret-jwt-key-change-this-in-production-use-64-chars-minimum

# JWT Token Expiration
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Rate Limiting
RATE_LIMIT_REQUESTS_PER_HOUR=100

# =============================================================================
# External APIs
# =============================================================================
# ISTAT API Configuration
ISTAT_API_BASE_URL=https://esploradati.istat.it/SDMXWS/rest
ISTAT_SDMX_BASE_URL=https://sdmx.istat.it/SDMXWS/rest/
ISTAT_API_TIMEOUT=30

# =============================================================================
# Cache and Performance
# =============================================================================
# Redis Configuration (for production token blacklist and caching)
REDIS_URL=redis://localhost:6379/0

# Performance Thresholds
QUERY_MAX_TIME_MS=5000
API_RESPONSE_MAX_TIME_MS=2000

# Circuit Breaker
CIRCUIT_BREAKER_FAILURE_THRESHOLD=3
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=60

# =============================================================================
# Logging
# =============================================================================
LOG_FILE=logs/osservatorio.log
LOG_API_REQUESTS=true

# =============================================================================
# Development and Testing
# =============================================================================
TEST_DATABASE_URL=sqlite:///data/databases/test_osservatorio.db
TEST_REDIS_URL=redis://localhost:6379/1
TEST_DATABASE_TIMEOUT=1.0
CIRCUIT_BREAKER_TEST_RECOVERY_TIMEOUT=1
